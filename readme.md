# Petclinic Performance Test

## Requirements

- JDK 8
- You need to have installed Gatling binaries, that can be downloaded from [here](https://repo1.maven.org/maven2/io/gatling/highcharts/gatling-charts-highcharts-bundle/2.2.5/gatling-charts-highcharts-bundle-2.2.5-bundle.zip)

## Invocation

* Command line options:
  * http://gatling.io/docs/current/general/configuration/

## Run

In this example we run test against the [Spring petclinic]() app.
```
$ java -jar spring-petclinic-2.1.0.jar
```

To run performance tests use:
```
$ ./run.sh -e num    # num is the id of the experiment's data set to execute
```
In order to run a health-check test use:
```
$ ./run.sh --health
```

**_Note:
There are other options to specify source folders._**

## Folders


`data/`

All data files (_.csv_, ...) to feed experiments.

`result/`

Gatling stores here the experiments results.

`simulations/`

Gatling scripts to run simulations.

`resources/`

Configuration files with experiment parameters.

`binaries/`

All _.class_ files generated by Scala compiler.

**_Note: 
`simulations/`, `resources/` and `binaries/` are always in the same directory._**
## Test scenarios

### HealthCheck

* HealthCheckSimulation:
  * 1 user, pause 500ms

### Normal Usage

* 100 * loop( CreateSimulation + RetrieveSimulation)
  * Experiment1:
    * 10 users, pause 500ms
    * rampup 10s
  * Experiment2:
    * 50 users, pause 500ms
    * rampup 20s
  * Experiment3:
    * 100 users, pause 500ms
    * rampup 20s

## TODO

* Refactor classes, isolating setups
  * Isolate parameters as fields or constants:
    * pause time
    * rampup
    * users
  * Ver: https://www.ivankrizsan.se/2016/05/06/introduction-to-load-testing-with-gatling-part-4/
